# 코루틴에 대해서

### 코루틴이 무엇인가요?

코틀린에서 지원하는, 경량 쓰레드를 활용하여 비동기 및 병렬 처리를 할 수 있는 도구

1. 경량 쓰레드라고 불리우며, 일반적인 쓰레드보다 생성 비용이 저렴하다.(64KB)

\-> 그렇기 때문에 컨텍스트 스위칭 비용이 저렴하다.

2. 많은 동시성 요청을 해결하기 위해 스레드 풀을 늘리는 것보다 비용이 저렴하기 때문에 처리율 증가가 높다.
3. 동기적인 코드처럼 작성할 수 있다.

### 코루틴과 스레드의 차이점

1. 일반 스레드에 비해 메모리 오버헤드가 적다.
2. 컨텍스트 비용이 저렴해서 스레드를 이용하는 것보다 빠르다.
3. suspend를 활용해서 실행을 중단하고 재개할 수 있다.

### 코루틴이 I/O 작업에 적합한 이유

I/O 작업은 블로킹 순간이 오면 작업을 중단했다가 블로킹이 끝나면 이어서 수행할 수 있기 때문이다.

### 코루틴의 스코프

* 코루틴의 생명 주기와 같다.
* 코루틴 스코프 내에서 실행된 모든 코루틴은 해당 스코프가 종료될 때까지 완료되어야한다.
* 모든 비동기적 요청인 코루틴을 동시에 종료할 수 있다.
* GlobalScope: 앱의 전체 생명주기 동안 존재하는 전역 스코프
* CoroutineScope: 사용자 정의 스코프를 생성할 때 사용되는 일반적인 스코프.

### 코루틴의 빌더

* launch: 리턴값이 없다.
* async: 동기적으로 리턴값을 가질 때 필요하다
* runBlocking 현재 스레드를 블로킹하고 수행한다.

### suspend 함수

* 실행 흐름을 일시 중단 가능하다.

### Dispatchers.Main,Default,IO

#### Main

* UI 스레드에서 사용된다.
* 긴 작업을 직접 실행할 때는 피해야한다.

#### IO

* I/O 바운드 작업에 최적화되어, 많은 수의 스레드를 유지할 수 있다.
* 파일 읽기/쓰기, 네트워크 요청, 데이터ㅍ베이스 접근에 사용한다.

#### Default

* CPU 바운드 작업에 최적화됨(계산 작업, 데이터 변환, 알고리즘 수행 등)

### async와 await()의 주의점

오버헤드 위험

예외를 await()할 때 던진다.

순서 보장 X





